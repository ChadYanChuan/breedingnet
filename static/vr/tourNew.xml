<krpano version="1.19" title="Virtual Tour">
	
	<include url="skin/_default.xml" />
	
	


	<!-- include some example loading progress animations -->
	<!-- <include url="loading/loadinganimation.xml" /> -->
	<!-- <include url="loading/loadingpercenttext.xml" /> -->
	<!-- <include url="loading/loadingbar.xml" /> -->
	

	<!-- customize skin settings: maps, gyro, webvr, thumbnails, tooltips, layout, design, ... -->
	<skin_settings maps="false"
	               maps_type="google"
	               maps_bing_api_key=""
	               maps_zoombuttons="false"
	               gyro="true"
	               webvr="true"
	               littleplanetintro="false"
	               title="false"
	               thumbs="true"
	               thumbs_width="240" thumbs_height="160" thumbs_padding="20" thumbs_crop="0|40|240|160"
	               thumbs_opened="false"
	               thumbs_text="true"
	               thumbs_dragging="true"
	               thumbs_onhoverscrolling="false"
	               thumbs_scrollbuttons="false"
	               thumbs_scrollindicator="false"
	               thumbs_loop="false"
	               tooltips_buttons="false"
	               tooltips_thumbs="false"
	               tooltips_hotspots="true"
	               tooltips_mapspots="true"
	               deeplinking="false"
	               loadscene_flags="MERGE"
	               loadscene_blend="OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)"
	               loadscene_blend_prev="SLIDEBLEND(0.5, 180, 0.75, linear)"
	               loadscene_blend_next="SLIDEBLEND(0.5,   0, 0.75, linear)"
	               loadingtext="载入中..."
	               layout_width="100%"
	               layout_maxwidth="650"
	               controlbar_width="-24"
	               controlbar_height="40"
	               controlbar_offset="20"
	               controlbar_offset_closed="-40"
	               controlbar_overlap.no-fractionalscaling="0"
	               controlbar_overlap.fractionalscaling="0"
	               design_skin_images="vtourskin.png"
	               design_bgcolor="0x000000"
	               design_bgalpha="0.6"
	               design_bgborder="0"
	               design_bgroundedge="10"
	               design_bgshadow="0"
	               design_thumbborder_bgborder="1 0xFFFFFF 1.0"
	               design_thumbborder_padding="1"
	               design_thumbborder_bgroundedge="10"
	               design_text_css="color:#FFFFFF; font-family:Arial;"
	               design_text_shadow="1"
	               />
	<skin_settings devices="mobile"	controlbar_offset="-15"/>
	<!-- startup action - load the first scene -->
	<action name="startup" autorun="onstart">
		if(startscene === null OR !scene[get(startscene)], copy(startscene,scene[0].name); );
		loadscene(get(startscene), null, MERGE);
		playsound(bg6, 'panos/icon/bg6.mp3', 0);
		if(startactions !== null, startactions() );
	</action>

	<!-- 动画action -->
	<action name="do_crop_animation">
		<!-- add attributes to the hotspot -->
		registerattribute(xframes, calc((imagewidth / %1) BOR 0));
		registerattribute(yframes, calc((imageheight / %2) BOR 0));
		registerattribute(frames, calc(xframes * yframes));
		registerattribute(frame, 0);

		set(crop, '0|0|%1|%2');

		setinterval(calc('crop_anim_' + name), calc(1.0 / %3),
			if(loaded,
				inc(frame);
				if(frame GE frames, if(onlastframe !== null, onlastframe() ); set(frame,0); );
				mod(xpos, frame, xframes);
				div(ypos, frame, xframes);
				Math.floor(ypos);
				mul(xpos, %1);
				mul(ypos, %2);
				calc(crop, xpos + '|' + ypos + '|%1|%2');
			  ,
				clearinterval(calc('crop_anim_' + name));
			  );
		  );
	</action>
	
	<action name="img_bgroundedge" type="Javascript">
		caller.sprite.style.borderRadius = args[1]+"px";
	</action>


	<style name="text"
	       url="%SWFPATH%/plugins/textfield.swf"
	       background="true"
	       css="color:#FFFFFF;"
	       enabled="false"
	       />
	<style name="img" keep="true" url="panos/icon/ui.png"/>
	<style name="btn" align="left"  onloaded="set(crop,calc(_x + '|0|70|70'));"/>
	<style name="close_btn_ico" keep="true" crop="80|150|36|20" align="top" y="10" enabled="false"/>
	<style name="close_btn_bg" keep="true" type="container" align="bottom" edge="top" y="-500" bgalpha="0.6" width="100" height="50" bgroundedge="0 0 50 50" bgcapture="true"
		onover="set(layer[close_btn_ico].crop,'80|180|36|20');"
		onout="set(layer[close_btn_ico].crop,'80|150|36|20');"
		onclick="hide_win();"
	/>
	
	<!-- 桌面背景 -->
	<layer name="dm_mask" keep="true" type="container" width="100%" height="100%" bgcolor="0x000000" enabled="true" handcursor="true" bgalpha="0" bgcapture="true" zorder="3" alpha="1" autoalpha="true" ondown="hide_win();" >
		<!-- <layer name="close_btn" style="close_btn_bg" >
			<layer name="close_btn_ico" style="img|close_btn_ico" />
		</layer> -->
	</layer>

	<!-- 背景 音乐 -->
	<plugin name="soundinterface"
        url.flash="%SWFPATH%/plugins/soundinterface.swf"
        url.html5="%SWFPATH%/plugins/soundinterface.js"
        rootpath=""
        preload="true"
        keep="true"
        />
	<include url="module/action.xml" />
	<include url="module/button.xml" if="!device.mobile"/>
	<include url="module/button_mobile.xml" devices="mobile" />
	<include url="module/share.xml" />
	<include url="module/thumb_new.xml" if="!device.mobile"/>
	<include url="module/thumb_mobile.xml" devices="mobile" />
	
	<scene name="scene_55b7000ad62f1" title="55b7000ad62f1" onstart="" thumburl="panos/55b7000ad62f1.tiles/thumb.jpg" lat="" lng="" heading="">

		<view hlookat="0" vlookat="0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

		<preview url="panos/55b7000ad62f1.tiles/preview.jpg" />

		<image>
			<cube url="panos/55b7000ad62f1.tiles/pano_%s.jpg" />

			<cube url="panos/55b7000ad62f1.tiles/mobile/pano_%s.jpg" devices="mobile" />
		</image>

		<!-- place your scene hotspots here -->

	</scene>
	
	<scene name="scene_all01" title="all01" onstart="" thumburl="panos/all01.tiles/thumb.jpg" lat="" lng="" heading="">

		<view hlookat="0.000" vlookat="0.000" vlookatmax="50" fovtype="MFOV" fov="125.000" fovmin="90" fovmax="125" limitview="range" />

		<preview url="panos/all01.tiles/preview.jpg" />

		<image>
			<cube url="panos/all01.tiles/pano_%s.jpg" />

			<cube url="panos/all01.tiles/mobile/pano_%s.jpg" devices="mobile" />
		</image>

		<!-- place your scene hotspots here -->
		<hotspot onclick="js(hotpotTest(get(view.hlookat),get(view.vlookat)))" name="spot3" url="panos/img/header.jpg" style="skin_tooltips_header" distorted="true" tooltip="门卫帅哥" ath="-26.72" atv="-6.42" />
		
		<!-- 动态热点图 -->
		<hotspot name="animation1"  tooltip="大门"  style="skin_hotspotstyle_title" ath="41" atv="-30" linkedscene="scene_all02" />
		
		<hotspot name="spot1" url="panos/icon/skin_buy_min.png" onloaded="do_crop_animation(128,128, 1000);" scale="0.5" zoom="true" ath="45" atv="-40" onclick="toggle(fullscreen);" />
		
		<!-- 跳转至香港 -->
	    <hotspot name="goto-xianggang" url="panos/icon/new_spotd01_txt_gif.png"
	           onloaded="do_crop_animation(100,120, 20);" scale="0.5" align="bottomcenter"
	           ath="40" atv="-5" onclick="looktohotspot(get(name),15);" />
	    <layer name="text-xianggang" url="%SWFPATH%/plugins/textfield.swf" parent="hotspot[goto-xianggang]" align="bottom" y="-20"  html="香港大陆台湾澳门" style="lookup_textfiled" handcursor="true" onclick="looktohotspot(get(name),15);js(togo(get(name)));" />
		
		<layer name="logo" type="container" style="text" width="240" height="40" keep="true" x="10" y="10" autoalpha="true" alpha="0">
		
		</layer>
		  	
	</scene>
	
	<scene name="scene_all02" title="大门" onstart="" thumburl="panos/all02.tiles/thumb.jpg" lat="" lng="" heading="">

		<view hlookat="0.000" vlookat="0.000" vlookatmax="50" fovtype="MFOV" fov="110.000" fovmin="90" fovmax="125" limitview="range" />

		<preview url="panos/all02.tiles/preview.jpg" />

		<image>
			<cube url="panos/all02.tiles/pano_%s.jpg" />

			<cube url="panos/all02.tiles/mobile/pano_%s.jpg" devices="mobile" />
		</image>

		<!-- place your scene hotspots here -->
		<hotspot name="spot1" style="skin_hotspotstyle" ath="0.748" atv="22.738" linkedscene="scene_all03" />
		<hotspot name="spot2" style="skin_hotspotstyle_back" ath="0.944" atv="29.713" linkedscene="scene_all01" />

	</scene>

	<scene name="scene_all03" title="all03" onstart="" thumburl="panos/all03.tiles/thumb.jpg" lat="" lng="" heading="">

		<view hlookat="0.000" vlookat="0.000" vlookatmax="50" fovtype="MFOV" fov="110.000" fovmin="90" fovmax="125" limitview="range" />

		<preview url="panos/all03.tiles/preview.jpg" />

		<image>
			<cube url="panos/all03.tiles/pano_%s.jpg" />

			<cube url="panos/all03.tiles/mobile/pano_%s.jpg" devices="mobile" />
		</image>

		<!-- place your scene hotspots here -->
		<hotspot name="spot1" style="skin_hotspotstyle_back" ath="-3.601" atv="21.282" linkedscene="scene_all02" />

	</scene>
	
	<scene name="scene_all04" title="all03" onstart="" thumburl="panos/all03.tiles/thumb.jpg" lat="" lng="" heading="">

		<view hlookat="0.000" vlookat="0.000" vlookatmax="50" fovtype="MFOV" fov="110.000" fovmin="90" fovmax="125" limitview="range" />

		<preview url="panos/all03.tiles/preview.jpg" />

		<image>
			<cube url="panos/all03.tiles/pano_%s.jpg" />

			<cube url="panos/all03.tiles/mobile/pano_%s.jpg" devices="mobile" />
		</image>

		<!-- place your scene hotspots here -->
		<hotspot name="spot1" style="skin_hotspotstyle_back" ath="-3.601" atv="21.282" linkedscene="scene_all02" />

	</scene>

	<scene name="scene_all05" title="all03" onstart="" thumburl="panos/all03.tiles/thumb.jpg" lat="" lng="" heading="">

		<view hlookat="0.000" vlookat="0.000" vlookatmax="50" fovtype="MFOV" fov="110.000" fovmin="90" fovmax="125" limitview="range" />

		<preview url="panos/all03.tiles/preview.jpg" />

		<image>
			<cube url="panos/all03.tiles/pano_%s.jpg" />

			<cube url="panos/all03.tiles/mobile/pano_%s.jpg" devices="mobile" />
		</image>

		<!-- place your scene hotspots here -->
		<hotspot name="spot1" style="skin_hotspotstyle_back" ath="-3.601" atv="21.282" linkedscene="scene_all02" />

	</scene>
	
	
</krpano>
